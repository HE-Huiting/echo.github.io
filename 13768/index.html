<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <link rel="stylesheet" href="css/swiper.min.css">
    <link rel="stylesheet" href="css/animate.min.css">
    <link rel="stylesheet" href="css/style.css">
    <title>Document</title>
</head>

<body id="page">
    <div class="stars"></div>
    <div class="twinkl"></div>

    <section class="topHeader">
        <div class="top">
            <header>
                <div class="w1200">
                    <a href="" class="logo">
                        <img src="images/logo.jpg" alt="logo">
                    </a>
                    <div class="header-desc">
                        <p>Glass Music</p>
                        <p>Hope Everyone can enjoy the music</p>
                    </div>
                    <a href="" class="logo"></a>
                </div>
            </header>
            <nav>
                <div class="w1200">
                    <a href="#artworks">Artworks</a>
                    <a href="#interact">Interact</a>
                    <a href="#play">Play</a>
                    <a href="#aboutUs">About us</a>
                </div>
            </nav>
        </div>
    </section>

    <section>
        <div class="preface">
            <div class="w1200">
                <p id="words">Welcome to the online digital exhibition "Glass Music", where you will embark on a unique
                    journey
                    that
                    invites you to explore the harmony and fun of the fusion of music, glass and water. You will
                    learn
                    and
                    explore the scientific concept behind Glass Music - which turns an ordinary glass of water into
                    a
                    special "musical instrument" - and experience the fascination of the art of playing different
                    tones
                    with
                    water and glass.</p>
            </div>
        </div>
    </section>

    <section id="artworks">
        <h1 class="title">Artworks</h1>
        <div class="swiper-container artworks-swiper">
            <div class="swiper-wrapper">
                <div class="swiper-slide">
                    <video src="video/Summer.mp4" controls></video>
                </div>
                <div class="swiper-slide">
                    <video src="video/Big big world.mp4" controls></video>
                </div>
                <div class="swiper-slide">
                    <video src="video/Waiting.mp4" controls></video>
                </div>
            </div>
            <!-- Add Arrows -->
            <div class="swiper-button-next"></div>
            <div class="swiper-button-prev"></div>
        </div>
        <div class="artworks-desc">
            <div class="w1200">
                <p class="artworks-desc-title">Big Big World</p>
                <p class="artworks-desc-content">We reinterpreted the much-loved song "Big Big World" in glass music,
                    and it takes on a
                    vibrant look in this performance. This excellent song expresses a universal desire for
                    exploration and adventure, which is given a whole new dimension in our performance. The
                    resonance of glass and water blends harmoniously with the vibrant rhythm of this
                    contemporary pop song. As you immerse yourself in the resonance of each glass of water,
                    you'll feel as if you're stepping into an adventure.</p>
            </div>
        </div>
    </section>
    <section id="interact">
        <h1 class="title">Interact</h1>
        <p class="interact-pre">Concept of glass music</p>
        <div class="interact-desc">
            <div class="w1200">
                <p>The amount of water in each glass plays the key role in glass music. When a water filled
                    glass is gently tapped, the glass vibrates and makes a sound. The amount of water in the
                    glass directly affects the speed of the vibration. The more water, the higher the resistance,
                    the slower the vibration and the lower the pitch. Conversely, the less water, the lower the
                    resistance, the faster the vibration of the glass, and the higher the pitch of the sound. This
                    subtle interplay between the amount of water and the frequency of vibration is the core of
                    glass music.</p>
            </div>
        </div>
        <div class="interact-box">
            <div id="cup" style="width:500px;height:500px;"></div>
            <div class="bar">
                <div class="item" data-value="1" data-index="7">
                    <span></span>
                    <span>700ml</span>
                    <span>1/do</span>
                </div>
                <div class="item" data-value="0.875" data-index="6">
                    <span></span>
                    <span>600ml</span>
                    <span>2/re</span>
                </div>
                <div class="item" data-value="0.75" data-index="5">
                    <span></span>
                    <span>500ml</span>
                    <span>3/mi</span>
                </div>
                <div class="item" data-value="0.625" data-index="4">
                    <span></span>
                    <span>400ml</span>
                    <span>4/fa</span>
                </div>
                <div class="item" data-value="0.5" data-index="3">
                    <span></span>
                    <span>300ml</span>
                    <span>5/so</span>
                </div>
                <div class="item" data-value="0.375" data-index="2">
                    <span></span>
                    <span>200ml</span>
                    <span>6/la</span>
                </div>
                <div class="item" data-value="0.25" data-index="1">
                    <span></span>
                    <span>100ml</span>
                    <span>7/si</span>
                </div>
                <div class="item" data-value="0" data-index="0">
                    <span></span>
                    <span>0ml</span>
                    <span>i/do</span>
                </div>
            </div>
            <audio src="" hidden id="audioPlay"></audio>
        </div>
        <div class="interact-desc interact-desc-center">
            <div class="w1200">
                <p>You can interact with different milliliters by clicking on them</p>
            </div>
        </div>
    </section>
    <section id="play">
        <h1 class="title">Play</h1>
        <div class="song">
            <div class="w1200">
                <button class="song-btn" data-value="summer" data-id="0">summer</button>
                <button class="song-btn" data-value="bigbigworld" data-id="1">big big world</button>
                <button class="song-btn" data-value="star" data-id="2">star</button>
            </div>
        </div>
        <div class="make-song">
            <audio src="" id="audioMakeSong" hidden></audio>
            <div class="w1200">
                <img src="images/yuansheng.png" alt="yuansheng" id="yuansheng">
                <img src="" alt="" id="qp">
                <img src="images/jiaoxue.png" alt="jiaoxue" id="jiaoxue">
            </div>
        </div>
        <div class="teach-song">
            <div class="w1200">
                <audio src="" id="teachSong" hidden></audio>
                <div class="teach-song-box">
                    <div class="item" data-id="0">
                        <img src="images/6_la.PNG" alt="2/re">
                        <p>2/re</p>
                    </div>
                    <div class="item" data-id="1">
                        <img src="images/7_si_2.PNG" alt="3/mi">
                        <p>3/mi</p>
                    </div>
                    <div class="item" data-id="2">
                        <img src="images/7_si_1.PNG" alt="4/fa">
                        <p>4/fa</p>
                    </div>
                    <div class="item" data-id="3">
                        <img src="images/6.PNG" alt="5/so">
                        <p>5/so</p>
                    </div>
                    <div class="item" data-id="4"><img src="images/5.PNG" alt="6/la">
                        <p>6/la</p>
                    </div>
                    <div class="item" data-id="5"><img src="images/3.PNG" alt="7/si">
                        <p>7/si</p>
                    </div>
                    <div class="item" data-id="6"><img src="images/4.PNG" alt="1/do">
                        <p>1/do</p>
                    </div>
                    <div class="item" data-id="7"><img src="images/2.PNG" alt="2/re">
                        <p>2/re</p>
                    </div>
                    <div class="item" data-id="8"><img src="images/1.PNG" alt="3/si">
                        <p>3/mi</p>
                    </div>
                    <div class="item" data-id="9"><img src="images/i.PNG" alt="4/fa">
                        <p>4/fa</p>
                    </div>
                    <div class="item" data-id="10"><img src="images/2_re.PNG" alt="5/so">
                        <p>5/so</p>
                    </div>
                    <div class="item" data-id="11"><img src="images/3_mi.PNG" alt="6/la">
                        <p>6/la</p>
                    </div>
                    <div class="item" data-id="12"><img src="images/4_fa.PNG" alt="7/mi">
                        <p>7/mi</p>
                    </div>
                    <div class="item" data-id="13"><img src="images/5_so.PNG" alt="i/do">
                        <p>i/do</p>
                    </div>
                </div>
            </div>
        </div>

    </section>
    <section id="aboutUs">
        <h1 class="title">About Us</h1>
        <div class="about-us-content">
            <div class="w1200">
                <p class="about-us-title">Feedback</p>
                <div class="about-us-info">
                    <div class="name">
                        <p>Xinyue Ding</p>
                        <p>Huiting He</p>
                    </div>
                    <div class="email">
                        <p>s3932605@student.rmit.edu.au</p>
                        <p>s3882241@student.rmit.edu.au</p>
                    </div>
                    <div class="contact">
                        <a href=""><img src="images/instagram.png" alt="instagram"></a>
                        <a href=""><img src="images/weixin.png" alt="wechat"></a>
                        <a href=""><img src="images/youtube.png" alt="youtube"></a>
                    </div>
                </div>
            </div>
        </div>
    </section>

    <script src="js/jquery.js"></script>
    <script src="js/swiper.min.js"></script>
    <script src="js/echarts.min.js"></script>
    <script src="js/echarts-liquidfill.min.js"></script>
    <script>
        // artworks
        let artworksContent = [
            {
                title: "Summer",
                content: `We use glass music to reinterpret renowned composer Hayao Miyazaki's famous work
"Summer". Miyazaki is known for his ability to capture the essence of the seasons through
music, and this work is an exploration of the beauty of nature. We will pay tribute to his
genius by transforming the essence of summer into a symphony of water and sound. The
airy tones will take you into a world of serenity and beauty, where the simplicity of glass is
transformed into a feeling of warmth and wonder. Summer reminds us of the charm of nature
and the precious memories associated with summer, forever preserved in the fragile
embrace of glass.`
            },
            {
                title: "Big Big World",
                content: `We reinterpreted the much-loved song "Big Big World" in glass music, and it takes on a
vibrant look in this performance. This excellent song expresses a universal desire for
exploration and adventure, which is given a whole new dimension in our performance. The
resonance of glass and water blends harmoniously with the vibrant rhythm of this
contemporary pop song. As you immerse yourself in the resonance of each glass of water,
you'll feel as if you're stepping into an adventure.`
            },
            {
                title: "Waiting",
                content: `In Huiting HE's sincere work "Waiting", the glasses become vessels for conveying the
complexity of human emotions. Fourteen glasses produce subtle pitch changes that
resonate with a soft, lyrical melody that reflects the tender moments we experience in life.
This is an introspective journey that invites you to think about and remember the beautiful
moments in your life that have been forgotten or missed. Stopping for a moment, thinking
and remembering, "waiting" for the lost moments of happiness to give you the courage and
strength to move forward.`
            }
        ]
        new Swiper('.artworks-swiper.swiper-container', {
            slidesPerView: 3,
            spaceBetween: 0,
            centeredSlides: true,
            initialSlide: 1,
            navigation: {
                nextEl: '.artworks-swiper .swiper-button-next',
                prevEl: '.artworks-swiper .swiper-button-prev',
            },
            on: {
                slideChange: function () {
                    const { title, content } = artworksContent[this.activeIndex]
                    $(".artworks-desc p.artworks-desc-title").text(title)
                    $(".artworks-desc p.artworks-desc-content").text(content)
                    console.log(this.activeIndex)
                }
            }
        })


        $(function () {
            let clientH = $('#page').height() + 200
            $(".stars").css("height", clientH)
            $(".twinkl").css("height", clientH)
        })


        window.onload = function () {
            // interact
            var shape = "path://M665 931.7H360l-31-767h366zM693 63.9H331c-6.6 0-12 5.4-12 12v56c0 6.6 5.4 12 12 12h362c6.6 0 12-5.4 12-12v-56c0-6.6-5.4-12-12-12z"
            var option = {
                // backgroundColor: '#09111e',
                series: [{
                    type: 'liquidFill',
                    data: [0.5],
                    radius: '90%',
                    waveLength: '100%', //波长
                    waveHeight: '200', //波长
                    amplitude: 10,//振幅
                    color: ['#a9ecfd'],
                    outline: { show: false },
                    backgroundStyle: { color: '#fff' },
                    shape: shape,
                    label: { show: false }
                }]
            }

            let myCup = echarts.init(document.getElementById("cup"))
            myCup.setOption(option)

            let bar = $(".bar .item")
            let audioPlayArr = ['1.d3_1.wav', '2.e3_1.wav', '3.f3_1.wav', '4.g3_1.wav', '5.a3_1.wav', '6.b3_1.wav', '7.c4_1.wav', '8.d4_1.wav']
            for (let i = 0; i < bar.length; i++) {
                $(bar[i]).click(function () {
                    let value = $(this).attr("data-value")
                    let index = $(this).attr("data-index")
                    console.log(value, index)
                    option.series[0].data = [value]
                    myCup.setOption(option)
                    $("#audioPlay")[0].pause()
                    $($("#audioPlay")[0]).attr("src", `video/${audioPlayArr[index]}`)
                    $("#audioPlay")[0].play()
                })
            }
            // play
            $(".song-btn").click(function () {
                if (teachFlag) return
                let value = $(this).attr("data-value")
                let id = $(this).attr("data-id")
                $("#qp").attr("src", `images/${value}.jpg`)
                $(".make-song").css("display", "block")
                $("#yuansheng").attr("data-id", id)
                $("#jiaoxue").attr("data-id", id)
                $("#audioMakeSong")[0].pause()
                $("#teachSong")[0].pause()
                $(".teach-song-box").removeAttr("style");
            })

            let songArray = ['summer.MP3', 'bigbig world.MP3', 'waiting.MP3']
            $("#yuansheng").click(function () {
                if (teachFlag) return
                let id = $(this).attr("data-id")
                $("#audioMakeSong")[0].pause()
                $($("#audioMakeSong")[0]).attr("src", `video/${songArray[id]}`)
                $("#audioMakeSong")[0].play()
            })

            let teachFlag = false
            let teachTimer = null
            let currentIndex = 0 // 当前索引
            let teachData = [
                '3,6,7,8,7,6,6,3,6,7,8,7,6,7,8,8,3,6,7,8,7,6,6,3,6,7,8,7,6,7,10,8,8,9,10,10,10,10,10,8,6,8,9,10,10,10,10,10,8,6,6,7,8,8,8,8,8,11,8,6,7',
                '6,7,8,8,8,8,9,7,7,7,7,8,6,6,6,6,7,8,7,7,6,7,8,8,8,8,9,7,7,7,7,8,8,7,6,8,7,7',
                '6,6,10,10,11,11,10,9,9,8,8,7,7,6,10,10,9,9,8,8,7,10,10,9,9,8,8,7,6,6,10,10,11,11,10,9,9,8,8,7,7,6,9,9,8,8,7,7,6'
            ]
            let chooseNum = []
            let chooseNumArray = []
            let teachArr = ['1.d3_1.wav', '2.e3_1.wav', '3.f3_1.wav', '4.g3_1.wav', '5.a3_1.wav', '6.b3_1.wav', '7.c4_1.wav', '8.d4_1.wav', '9.e4_1.wav', '10.f4_1.wav', '11.g4_1.wav', '12.a4_1.wav', '13.b4_1.wav', '14.c5_1.wav']
            $("#jiaoxue").click(function () {
                if (teachFlag) return
                teachFlag = true
                $(".teach-song-box").removeAttr("style");
                let id = $(this).attr("data-id")
                chooseNum = teachData[id].split(",")
                executeCallback()
                teachTimer = setInterval(executeCallback, 800)
            })

            $(".teach-song-box .item").click(function () {
                if (teachFlag) return
                let id = $(this).attr('data-id')
                $("#teachSong")[0].pause()
                $($("#teachSong")[0]).attr("src", `video/${teachArr[id]}`)
                $("#teachSong")[0].play()
            })

            // 立即执行一次回调函数
            const executeCallback = () => {
                if (currentIndex >= chooseNum.length) {
                    clearInterval(teachTimer) // 当达到数组的最后一个元素时停止循环
                    currentIndex = 0
                    $(".teach-song-box .item").removeClass("active")
                    $("#teachSong")[0].pause()
                    teachFlag = false
                    chooseNumArray = []
                    return
                }

                const value = chooseNum[currentIndex]
                chooseNumArray.push(value)
                $(".teach-song-box .item").removeClass("active")
                $(".teach-song-box .item").eq(value).addClass("active")
                $("#teachSong")[0].pause()
                $($("#teachSong")[0]).attr("src", `video/${teachArr[value]}`)
                $("#teachSong")[0].play()
                makeBgColor()
                currentIndex++ // 索引加一
            }

            function makeBgColor() {
                let gradientColors = [];
                let arrayLength = chooseNumArray.length

                // 计算每个颜色的色相步长
                let hueStep = 360 / arrayLength;

                for (let i = 0; i < arrayLength; i++) {
                    // 计算当前颜色的色相值
                    let hue = i * hueStep;

                    // 构建当前颜色的 HSL 字符串
                    let color = `hsl(${hue}, 100%, 50%)`;

                    gradientColors.push(color);
                }

                // 构建渐变色样式
                let gradientStyle = `linear-gradient(to right, ${gradientColors.join(', ')})`;

                // 应用渐变背景色样式
                $(".teach-song-box").css("background", gradientStyle);
            }
        }

        $(window).scroll(function () {
            // 获取滚动条相对于文档顶部的距离
            var scrollDistance = $(window).scrollTop();

            // 定义需要触发固定定位的位置（例如滚动到距离顶部500px处）
            var targetPosition = 300;

            if (scrollDistance >= targetPosition) {
                // 滚动到目标位置时执行固定定位的操作
                $('.topHeader').addClass('fixed');
            } else {
                // 滚动位置小于目标位置时移除固定定位的类名
                $('.topHeader').removeClass('fixed');
            }
        });

        $("nav a").click(function () {
            if (location.pathname.replace(/^\//, '') == this.pathname.replace(/^\//, '') && location.hostname == this.hostname) {
                var $target = $(this.hash);
                $target = $target.length && $target || $('[name=' + this.hash.slice(1) + ']');
                if ($target.length) {
                    var targetOffset = $target.offset().top - 120;
                    $('html,body').animate({ scrollTop: targetOffset }, 200);
                    return false;
                }
            }
        });
    </script>
</body>

</html>